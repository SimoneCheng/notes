<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-notes/Git/git-basic-1">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Git 基本原理、分支與分支合併 | Simone 的技術筆記</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://simonecheng.github.io/notes/docs/notes/Git/git-basic-1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Git 基本原理、分支與分支合併 | Simone 的技術筆記"><meta data-rh="true" name="description" content="🐳 前言"><meta data-rh="true" property="og:description" content="🐳 前言"><link data-rh="true" rel="icon" href="/notes/img/dovefavicon.png"><link data-rh="true" rel="canonical" href="https://simonecheng.github.io/notes/docs/notes/Git/git-basic-1"><link data-rh="true" rel="alternate" href="https://simonecheng.github.io/notes/docs/notes/Git/git-basic-1" hreflang="en"><link data-rh="true" rel="alternate" href="https://simonecheng.github.io/notes/docs/notes/Git/git-basic-1" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/notes/blog/rss.xml" title="Simone 的技術筆記 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/notes/blog/atom.xml" title="Simone 的技術筆記 Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/notes/assets/css/styles.f0331843.css">
<link rel="preload" href="/notes/assets/js/runtime~main.0c91f086.js" as="script">
<link rel="preload" href="/notes/assets/js/main.7190c6dc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/notes/"><div class="navbar__logo"><img src="/notes/img/dovefavicon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/notes/img/dovefavicon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Simoneㄉ技術筆記</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes/docs/notes/intro">Notes</a><a class="navbar__item navbar__link" href="/notes/docs/collection/intro">Collection</a><a class="navbar__item navbar__link" href="/notes/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SimoneCheng/notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes/docs/notes/intro">首頁</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/docs/notes/未分類/writing-a-good-pull-request">未分類</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/docs/notes/克服JS的奇怪部分/execution-contexts-and-lexical-Environments">克服JS的奇怪部分</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/notes/docs/notes/Git/git-basic-1">Git</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/docs/notes/Git/git-basic-1">Git 基本原理、分支與分支合併</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/docs/notes/HTML/metadata">HTML</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/docs/notes/MySQL/install-mysql">MySQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/docs/notes/coding-style-guide/html-and-css">Coding Style Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/docs/notes/data-structure/recursion">Data Structure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/docs/notes/react/use-effect">React</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/notes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Git</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Git 基本原理、分支與分支合併</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Git 基本原理、分支與分支合併</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-前言">🐳 前言<a href="#-前言" class="hash-link" aria-label="Direct link to 🐳 前言" title="Direct link to 🐳 前言">​</a></h2><p>因為在工作上大量的用到 git 這個版控工具，所以想好好了解自己每個用到的指令背後實際上發生了什麼事，上了一堂 udemy 的課，寫了一些小筆記。</p><p>筆記來源大部分參考自：<a href="https://www.udemy.com/course/git-basic/" target="_blank" rel="noopener noreferrer">https://www.udemy.com/course/git-basic/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-git-local-基本原理解析">🐳 Git Local 基本原理解析<a href="#-git-local-基本原理解析" class="hash-link" aria-label="Direct link to 🐳 Git Local 基本原理解析" title="Direct link to 🐳 Git Local 基本原理解析">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-git-的設定">🦀 Git 的設定<a href="#-git-的設定" class="hash-link" aria-label="Direct link to 🦀 Git 的設定" title="Direct link to 🦀 Git 的設定">​</a></h3><p>通常在看各式各樣的 git 教學的時候，會看到當使用者下載好 git 之後，教學的下一個步驟是在終端機打入以下指令：</p><div class="language-git codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-git codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git config --global user.email </span><span class="token string" style="color:#e3116c">&quot;[your email]&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git config --global user.name </span><span class="token string" style="color:#e3116c">&quot;[your name]&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這兩行的意思其實會在根目錄建立一個 global 的 git 設定檔（檔名是 .gitconfig），而且這個設定檔會自動帶入到每一個 git repository。除了這個 global 的 git 設定檔之外，每一個 git repository 裡面都有自己的 git 設定檔，可以進到該 repo 透過 <code>git config --list</code> 指令查看。</p><p>除了設定使用者之外，git config 其實還可以做非常多其他的設定，來達到 git 的客製化。</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>git repository 會優先採用 local config 的設定，再使用 global config 的設定。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-初始化代碼倉庫">🦀 初始化代碼倉庫<a href="#-初始化代碼倉庫" class="hash-link" aria-label="Direct link to 🦀 初始化代碼倉庫" title="Direct link to 🦀 初始化代碼倉庫">​</a></h3><p>建立一個 git repository 主要有兩種方法：</p><ul><li>git clone 遠端的倉庫</li><li>建立本地倉庫，再使用 git init</li></ul><p>透過這兩種方式都可以發現 git repository 裡面出現了一個 <strong>.git</strong> 的資料夾，可以在終端機裡面透過 <code>ls -a</code> 這個指令看到這個資料夾，透過觀察這個資料夾的變化，可以很好地理解 git 是如何運作的。</p><p>首先先在這邊放上一個最基本的 .git 資料夾的架構，接下來會透過這個資料夾的變動來一一理解 git 如何運作。</p><div class="language-git codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-git codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── branches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── HEAD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── hooks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── exclude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── pack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── refs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── heads</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── tags</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-git-add-file-背後發生了什麼">🦀 git add <!-- -->[file]<!-- --> 背後發生了什麼<a href="#-git-add-file-背後發生了什麼" class="hash-link" aria-label="Direct link to -git-add-file-背後發生了什麼" title="Direct link to -git-add-file-背後發生了什麼">​</a></h3><p>當建立一個檔案，並將其透過 <code>git add [檔名]</code> 加入 tracked file 的時候，可以發現 .git 資料夾發生了變化，我們假設目前的變化如下：</p><div class="language-git codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-git codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── branches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── HEAD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── hooks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── exclude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── index // 多了這個</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   ├── 54 // 多了這個</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── 7fe984c2f69bd68e98fca67f99a5c14d1435aa // 多了這個</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── pack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── refs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── heads</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── tags</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以發現 .git 裡面的 objects 資料夾中多了另外一串奇怪的數字，這一串數字是透過稱為 SHA1 的加密算法算出來的，如果要查看任何有關 objects 資料夾當中的東西的話，可以在終端機當中輸入以下指令：</p><div class="language-git codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-git codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git cat-file -t 547fe9 // 只取前六位即可</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git cat-file -p 547fe9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted" style="color:#d73a49">-t: 查看該檔案的類型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted" style="color:#d73a49">-p: 查看該檔案的內容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted" style="color:#d73a49">-s: 查看該檔案的大小</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在終端機下了上述這兩個指令之後，可以發現透過 <code>git add [file]</code> 之後，產生的 object 類型是　blob 而裡面的內容則是檔案裡面的文字內容，另外一個很重要的是，我們發現到這個 object 並沒有儲存檔名。（檔名會存在另外一個地方）</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-blob-對象與-sha1-哈希">🦀 blob 對象與 SHA1 哈希<a href="#-blob-對象與-sha1-哈希" class="hash-link" aria-label="Direct link to 🦀 blob 對象與 SHA1 哈希" title="Direct link to 🦀 blob 對象與 SHA1 哈希">​</a></h3><ul><li>HASH 算法：將任意長度的輸入透過 HASH 算法變換成固定長度的輸出，常常被用來做加密。</li><li>常見的 HASH 算法，括號當中的 bit 表示會輸出多少 bit 的字串：<ul><li>MD5 (128 bit) （已被破解）</li><li>SHA1 (160 bit) （已被破解）</li><li>SHA256 (256 bit) </li><li>SHA512 (512 bit)</li></ul></li></ul><p><code>git add [file]</code> 之後， git 會根據檔案的類型、大小、修改的內容來產生 HASH 值，然後存到 .git/objects 當中，同時也會壓縮內容。目前 git 算出 HASH 值的方式都是用 SHA1 算法。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-working-directory-和-staging-area">🦀 Working Directory 和 Staging Area<a href="#-working-directory-和-staging-area" class="hash-link" aria-label="Direct link to 🦀 Working Directory 和 Staging Area" title="Direct link to 🦀 Working Directory 和 Staging Area">​</a></h3><p>git 的工作區大致上可以分成三種不同的類型來理解，分別是 Working Directory、Staging Area、git repository。如下圖所示：</p><p><img loading="lazy" src="/notes/assets/images/gitWorkspace-df5827519a901293ba1240bfdeb5b98e.png" width="1000" height="380" class="img_ev3q"></p><p>在檔案尚未被 git 追蹤的時候，會停留在 Working Directory，任何需要被 git 控管的檔案都需要使用 <code>git add [file]</code> 這個指令，來將檔案加入到 Staging Area，最後透過撰寫 commit 存到 git repository 裡面。</p><p>在圖中可以看到，Staging Area 下面有一個 index 的字樣，沒錯，有關 Staging Area 的任何訊息都會被儲存在 .git/index 這個資料夾當中。我們可以透過以下指令去檢視目前在 index 的檔案有哪些：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git ls-files // 只顯示檔名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git ls-files -s // 顯示檔名、該檔案的權限、文件內容</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>所以可以知道，前面提到的 blob object 只儲存文件內容，而文件的檔名會儲存在 index（索引區）。可以透過 <code>git status</code> 指令來觀察 Staging Area 和 Working Directory 的變化。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-git-commit-背後發生了什麼">🦀 git commit 背後發生了什麼<a href="#-git-commit-背後發生了什麼" class="hash-link" aria-label="Direct link to 🦀 git commit 背後發生了什麼" title="Direct link to 🦀 git commit 背後發生了什麼">​</a></h3><p>將文件加入到 Staging Area 之後，接著要使用 <code>git commit -m &quot;message&quot;</code> 來生成 commit，生成 commit 的目的是為了將有修改的地方存到代碼倉庫（git repository）當中，那麼 commit 在生成的時候，究竟是生成了什麼呢？</p><p>生成一個 commit 之後，git 也會透過 SHA1 算法為每個 commit 算出一組編碼，這時候我們也可以運用上面提到的 <code>git cat-file</code> 指令去觀察 commit 的類型和內容。透過該指令我們可以知道 commit 的類型是 commit，而內容則是 tree 和作者資訊，如下圖範例：</p><p><img loading="lazy" src="/notes/assets/images/commitStructure-b1b1542e3c68255f4f4da5d0cd4c2cd7.png" width="701" height="196" class="img_ev3q"></p><p>tree 當中會儲存前面提到的 blob object，也就是說，tree 裡面存的是目前這個 commit 有修改到的所有檔案。再者，如果這個 commit 是接在另一個 commit 後面的話，除了 tree 之外，則會額外再多看到一個 parent，這個 parent 標示著這個 commit 是接在某個特定的 commit 之後。</p><p>除了觀察 commit 本身之外，我們也可以觀察有 commit 的分支，假設輸入以下指令：</p><div class="language-git codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-git codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat .git/refs/heads/master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>就可以看到這個 master 的分支最新的 commit 是哪一個。</p><p>另外 .git 當中還有一個資料夾稱作 HEAD，可以將 HEAD 想像成一個指針，這個 HEAD 的用途是用來指向目前所在的分支。可以透過以下指令去查看 .git/HEAD 的內容：</p><div class="language-git codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-git codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat .git/HEAD</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-commit-history-tree">🦀 Commit History Tree<a href="#-commit-history-tree" class="hash-link" aria-label="Direct link to 🦀 Commit History Tree" title="Direct link to 🦀 Commit History Tree">​</a></h3><p>在前面的幾個部份當中，我們可以發現不管是使用 <code>git add</code> 或 <code>git commit -m</code>  git 都會透過 SHA1 算法來生成一個 git object，而這些 object 都會指向各自關聯到的另外一個 git object，比如說新的 commit 會指向上一個 commit，以此類推，如果有很多個 commit 的話，我們就可以透過這樣的方式去知道整個 commit history。而每一個 commit 會指向該 commit 有修改到的檔案（blob object），透過這個指向，我們也可以知道每一個 commit 修改了什麼。</p><p>這樣子不斷指向的過程便會形成一個 commit history tree（如下圖），而我們也可以知道，這樣的結構就是 git 的版本概念。</p><p><img loading="lazy" src="/notes/assets/images/commitHistoryTree-693101891da2e8a0c728a5c773714a12.png" width="800" height="642" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-branch-和-head">🐳 Branch 和 HEAD<a href="#-branch-和-head" class="hash-link" aria-label="Direct link to 🐳 Branch 和 HEAD" title="Direct link to 🐳 Branch 和 HEAD">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-什麼是分支什麼是head">🦀 什麼是分支？什麼是HEAD？<a href="#-什麼是分支什麼是head" class="hash-link" aria-label="Direct link to 🦀 什麼是分支？什麼是HEAD？" title="Direct link to 🦀 什麼是分支？什麼是HEAD？">​</a></h3><p>在整個 git 版本控制的工作流程當中有一個非常重要的概念，就是分支，在程式開發的流程當中會不斷遇到建立分支、合併分支的過程，在開始講解基本操作之前，先來解釋一下到底什麼是分支？</p><p>翻翻 git 的官方文件後，我們可以看到 git 對分支的解釋：</p><blockquote><p>Branches are named pointers to commits.</p></blockquote><p>從以上敘述可以知道，分支只是一個指向某個 commit 的指針。此時我們就會知道如果要讓分支這個功能可以運作需要達成兩個條件：</p><ol><li>要有一個地方可以儲存每個分支指向的哪個 commit 這件事情。 ➡️ 存在 .git/refs/heads/<!-- -->[branch 名稱]<!-- --> 裡面。</li><li>要有一個東西可以讓我們知道我們現在在哪一個分支上面。 ➡️ 透過 HEAD 來實現，也就是說只要看 HEAD 指向哪個分支，我們現在就在哪個分支。（HEAD 存在 .git/HEAD）</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-分支的基本操作">🦀 分支的基本操作<a href="#-分支的基本操作" class="hash-link" aria-label="Direct link to 🦀 分支的基本操作" title="Direct link to 🦀 分支的基本操作">​</a></h3><ol><li><code>git branch</code>：查看目前有哪些分支。如果該分支前面出現 * 字號，表示那是現在所在的分支。</li><li><code>git branch [branch 名稱]</code>：創建分支。</li><li><code>git checkout [branch 名稱]</code>：切換現在的分支到另外一個分支。</li><li><code>git branch -d [branch 名稱]</code>：刪除分支。如果分支沒有 merge 的話，會出現無法刪除分支的提示訊息。</li><li><code>git branch -D [branch 名稱]</code>：強制刪除分支。就算分支沒有 merge 也可以刪除。</li><li><code>git reflog</code>：會記錄所有在 git 當中的操作，包括被刪除分支的 commit。</li><li><code>git branch -m [舊 branch 名稱] [新 branch 名稱]</code>：重新命名分支名稱。</li><li><code>git checkout -b [branch 名稱]</code>：創建分支並且切換到該分支。</li></ol><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>注意：如果現在所在的分支是想要刪除的分支的話，就不能刪除分支。要先移動到別的分支，才能刪除。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-使用-git-checkout-出特定的-commit">🦀 使用 git checkout 出特定的 commit<a href="#-使用-git-checkout-出特定的-commit" class="hash-link" aria-label="Direct link to 🦀 使用 git checkout 出特定的 commit" title="Direct link to 🦀 使用 git checkout 出特定的 commit">​</a></h3><p><code>git checkout</code> 除了可以用來切換分支之外，也可以用來找出某個特定的 commit。如果不小心刪除了某個分支，可以先用 <code>git reflog</code> 找到被刪除分支的 commit，然後再建立分支，就可以恢復被刪除的分支。如下步驟：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. git reflog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. git checkout [commit sha1值(六個字)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. git checkout -b [被刪除的 branch 名稱]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這個用法平常不太常用到，但在特殊情況下特別有用！</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><strong>刪除分支到底刪除了什麼？</strong> 刪除分支時，只會刪除分支這個指針，並不會刪除任何的 commit！</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-關於-git-diff-這個命令">🦀 關於 git diff 這個命令<a href="#-關於-git-diff-這個命令" class="hash-link" aria-label="Direct link to 🦀 關於 git diff 這個命令" title="Direct link to 🦀 關於 git diff 這個命令">​</a></h3><p>現在應該也比較少在用 <code>git diff</code> 這個指令了，因為 IDE 可以直接顯示檔案變動的情況，非常方便，但其實也可以透過在終端機打下指令 <code>git diff</code> 來查看 working directory 和 staging area 中文件之間的差別。</p><p>如果要查看 staging area 和 git repository 的差別的話，可以用 <code>git diff --cache</code> 來查看。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-分支合併branch-merge">🐳 分支合併（Branch Merge）<a href="#-分支合併branch-merge" class="hash-link" aria-label="Direct link to 🐳 分支合併（Branch Merge）" title="Direct link to 🐳 分支合併（Branch Merge）">​</a></h2><p>當團隊裡的人在不同的分支開發完之後，會需要將所有的分支都合併在一起，才是一個完整的應用。此時合併分支時會有幾個不同的狀況。這個單元會一一介紹。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-fast-forward-merge">🦀 Fast Forward Merge<a href="#-fast-forward-merge" class="hash-link" aria-label="Direct link to 🦀 Fast Forward Merge" title="Direct link to 🦀 Fast Forward Merge">​</a></h3><p>算是在合併分支的時候遇到的最簡單的一種。</p><p>假設目前有兩個分支，分別是 mater 和 bugfix。bugfix 是基於 master 最新的 commit 所創建的另外一個分支，我們在 bugfix 上新增了一個 commit。此時整個 branch 和 commit 的結構大致上如下圖所示：</p><p><img loading="lazy" src="/notes/assets/images/fastForwardMerge-a2f4eb113f1a8a55b003ab75fd694184.png" width="1840" height="832" class="img_ev3q"></p><p>在這樣的結構之下進行 git merge 的話，master branch 的指針會向右移動，會與 bugfix 位於同一個 commit，稱之為 fast forward merge。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>小結</div><div class="admonitionContent_S0QG"><p>在這裡簡單總結符合 fast forward merge 的條件：分支 B 合併進 分支 A 的時候，分支 B 的第一個 commit 指向分支 A 最新的 commit。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-3-way-merge">🦀 3 Way Merge<a href="#-3-way-merge" class="hash-link" aria-label="Direct link to 🦀 3 Way Merge" title="Direct link to 🦀 3 Way Merge">​</a></h3><p>3 Way Merge 是另外一種在合併分支的時候會遇到的狀況，這個狀況應該非常的常見。會發生這樣的狀況是因為：分支 B 合併進 分支 A 的時候，分支 B 的第一個 commit 沒有指向分支 A 最新的 commit。</p><p>實際上最常遇到的狀況是，自己從 master 另開新的 feature 分支來開發新的功能的時候，其他同事也會同時開發其他的功能，有可能他們先開發完成 merge 進 master，我自己的 feature 分支就會落後目前的 master 分支。這時候如果我開發完成要準備 merge 進 master，就會發生 3 Way Merge。</p><p>如下圖所示（bugfix 分支落後 master 分支一次 commit）：</p><p><img loading="lazy" src="/notes/assets/images/3WayMerge-1-e737ced181159b51bdb83e883defea36.png" width="2900" height="1498" class="img_ev3q"></p><p>這個情況下，如果進行 merge 而且沒有衝突的話，會自動生成一個新的 commit，這個新的 commit 會同時指向兩個分支的上一個 commit，如下圖：</p><p><img loading="lazy" src="/notes/assets/images/3WayMerge-2-fa1d41c019e9f33404962d629917cf64.png" width="2862" height="1422" class="img_ev3q"></p><p>如果用一些 git GUI 工具的話，應該可以看到 branch 的分支圖。當如果一個 repo 很大的時候，有很多 3 way merge 的話，分支圖就會盤根錯節（很醜 👾），這種時候就是 <code>git rebase</code> 出場的時機了（稍後會寫到）！</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-3-way-merge-with-conflict">🦀 3 Way Merge with Conflict<a href="#-3-way-merge-with-conflict" class="hash-link" aria-label="Direct link to 🦀 3 Way Merge with Conflict" title="Direct link to 🦀 3 Way Merge with Conflict">​</a></h3><p>前面提到的 3 Way Merge 如果順順的，沒什麼意外發生的話，就會自動 merge，但如果兩個準備要合併的分支，兩個分支都有修改到同樣的地方的話，就會發生衝突，也就是 conflict。</p><p>如果發生衝突的話，可以按照終端機上的說明，一步一步解掉衝突。等到衝突全部解掉後，就可以 merge 了！</p><p>有衝突發生的當下可以在終端機打 <code>git status</code> 檢查是哪些檔案發生衝突，再去 vsCode 裡面把衝突解掉就可以了！</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-git-rebase-是什麼">🦀 git rebase 是什麼？<a href="#-git-rebase-是什麼" class="hash-link" aria-label="Direct link to 🦀 git rebase 是什麼？" title="Direct link to 🦀 git rebase 是什麼？">​</a></h3><p><code>git rebase</code> 可以讓所在的分支，同步另外一個分支的最新 commit，比如說我現在在 feature 1 分支，並且 commit 了三次，此時這個分支落後 master 分支一個 commit。</p><p>使用 <code>git rebase master</code> 之後，就可以讓 feature 1 分支的三次 commit 接在 master 分支最新的 commit 之後，如此一來就可以進行 Fast Forward Merge。</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>要特別注意的是使用 <code>git rebase</code> 也有可能會造成衝突，如果有衝突的話需要將衝突解掉才能 rebase。另外使用了 rebase 之後，在該分支上面的 commit 會全部重新計算，因為這幾個 commit 的第一個有了新的 parent commit，所以 commit tree 便重新算了一次，也就是說在該分支所建立的 commit 的 id 會不一樣，雖然每個 commit 的修改內容仍和先前相同。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-參考資料">🐳 參考資料<a href="#-參考資料" class="hash-link" aria-label="Direct link to 🐳 參考資料" title="Direct link to 🐳 參考資料">​</a></h2><ul><li><a href="https://www.udemy.com/course/git-basic/" target="_blank" rel="noopener noreferrer">Git/GitHub/GitLab 完全教程（包括Git底層原理）</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SimoneCheng/notes/tree/main/docs/notes/Git/git-basic-1.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes/docs/notes/克服JS的奇怪部分/objects-and-functions-part-2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Objects and Functions - Part 2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes/docs/notes/HTML/metadata"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">metadata、&lt;meta&gt; 知多少</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-前言" class="table-of-contents__link toc-highlight">🐳 前言</a></li><li><a href="#-git-local-基本原理解析" class="table-of-contents__link toc-highlight">🐳 Git Local 基本原理解析</a><ul><li><a href="#-git-的設定" class="table-of-contents__link toc-highlight">🦀 Git 的設定</a></li><li><a href="#-初始化代碼倉庫" class="table-of-contents__link toc-highlight">🦀 初始化代碼倉庫</a></li><li><a href="#-git-add-file-背後發生了什麼" class="table-of-contents__link toc-highlight">🦀 git add file 背後發生了什麼</a></li><li><a href="#-blob-對象與-sha1-哈希" class="table-of-contents__link toc-highlight">🦀 blob 對象與 SHA1 哈希</a></li><li><a href="#-working-directory-和-staging-area" class="table-of-contents__link toc-highlight">🦀 Working Directory 和 Staging Area</a></li><li><a href="#-git-commit-背後發生了什麼" class="table-of-contents__link toc-highlight">🦀 git commit 背後發生了什麼</a></li><li><a href="#-commit-history-tree" class="table-of-contents__link toc-highlight">🦀 Commit History Tree</a></li></ul></li><li><a href="#-branch-和-head" class="table-of-contents__link toc-highlight">🐳 Branch 和 HEAD</a><ul><li><a href="#-什麼是分支什麼是head" class="table-of-contents__link toc-highlight">🦀 什麼是分支？什麼是HEAD？</a></li><li><a href="#-分支的基本操作" class="table-of-contents__link toc-highlight">🦀 分支的基本操作</a></li><li><a href="#-使用-git-checkout-出特定的-commit" class="table-of-contents__link toc-highlight">🦀 使用 git checkout 出特定的 commit</a></li><li><a href="#-關於-git-diff-這個命令" class="table-of-contents__link toc-highlight">🦀 關於 git diff 這個命令</a></li></ul></li><li><a href="#-分支合併branch-merge" class="table-of-contents__link toc-highlight">🐳 分支合併（Branch Merge）</a><ul><li><a href="#-fast-forward-merge" class="table-of-contents__link toc-highlight">🦀 Fast Forward Merge</a></li><li><a href="#-3-way-merge" class="table-of-contents__link toc-highlight">🦀 3 Way Merge</a></li><li><a href="#-3-way-merge-with-conflict" class="table-of-contents__link toc-highlight">🦀 3 Way Merge with Conflict</a></li><li><a href="#-git-rebase-是什麼" class="table-of-contents__link toc-highlight">🦀 git rebase 是什麼？</a></li></ul></li><li><a href="#-參考資料" class="table-of-contents__link toc-highlight">🐳 參考資料</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023, Built with Docusaurus.</div></div></div></footer></div>
<script src="/notes/assets/js/runtime~main.0c91f086.js"></script>
<script src="/notes/assets/js/main.7190c6dc.js"></script>
</body>
</html>