"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3330],{964:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"notes/Git/git-send-email-gmail","title":"\u901a\u904e OAuth \u4f7f\u7528 Gmail \u548c git send-email \u8a2d\u7f6e\u6307\u5357","description":"\u80cc\u666f","source":"@site/docs/notes/Git/git-send-email-gmail.md","sourceDirName":"notes/Git","slug":"/notes/Git/git-send-email-gmail","permalink":"/notes/docs/notes/Git/git-send-email-gmail","draft":false,"unlisted":false,"editUrl":"https://github.com/SimoneCheng/notes/tree/main/docs/notes/Git/git-send-email-gmail.md","tags":[],"version":"current","frontMatter":{"title":"\u901a\u904e OAuth \u4f7f\u7528 Gmail \u548c git send-email \u8a2d\u7f6e\u6307\u5357","date":"2025-04-03T00:00:00.000Z"},"sidebar":"notes","previous":{"title":"Git \u57fa\u672c\u539f\u7406\u3001\u5206\u652f\u8207\u5206\u652f\u5408\u4f75","permalink":"/notes/docs/notes/Git/git-basic-1"},"next":{"title":"metadata\u3001<meta> \u77e5\u591a\u5c11","permalink":"/notes/docs/notes/HTML/metadata"}}');var s=l(4848),t=l(8453);const o={title:"\u901a\u904e OAuth \u4f7f\u7528 Gmail \u548c git send-email \u8a2d\u7f6e\u6307\u5357",date:new Date("2025-04-03T00:00:00.000Z")},a=void 0,d={},c=[{value:"\ud83d\udc33 \u80cc\u666f",id:"whale-\u80cc\u666f",level:2},{value:"\ud83d\udc33 \u8a2d\u7f6e\u6b65\u9a5f",id:"whale-\u8a2d\u7f6e\u6b65\u9a5f",level:2},{value:"1. \u5b89\u88dd Go \u8a9e\u8a00\u74b0\u5883",id:"1-\u5b89\u88dd-go-\u8a9e\u8a00\u74b0\u5883",level:3},{value:"2. \u5728 Google Cloud \u5275\u5efa OAuth \u6191\u8b49",id:"2-\u5728-google-cloud-\u5275\u5efa-oauth-\u6191\u8b49",level:3},{value:"3. \u8a2d\u7f6e\u6191\u8b49\u6587\u4ef6",id:"3-\u8a2d\u7f6e\u6191\u8b49\u6587\u4ef6",level:3},{value:"4. \u5b89\u88dd sendgmail \u5de5\u5177",id:"4-\u5b89\u88dd-sendgmail-\u5de5\u5177",level:3},{value:"5. \u8a2d\u7f6e sendgmail",id:"5-\u8a2d\u7f6e-sendgmail",level:3},{value:"6. \u914d\u7f6e git send-email \u4f7f\u7528 sendgmail",id:"6-\u914d\u7f6e-git-send-email-\u4f7f\u7528-sendgmail",level:3},{value:"\ud83d\udc33 \u6ce8\u610f\u4e8b\u9805",id:"whale-\u6ce8\u610f\u4e8b\u9805",level:2},{value:"\ud83d\udc33 \u53c3\u8003\u8cc7\u6599",id:"whale-\u53c3\u8003\u8cc7\u6599",level:2}];function r(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h2,{id:"whale-\u80cc\u666f",children:["\ud83d\udc33"," \u80cc\u666f"]}),"\n",(0,s.jsx)(n.p,{children:"Gmail \u5df2\u4e0d\u518d\u652f\u6301\u4f7f\u7528\u666e\u901a\u7684 SMTP \u7528\u6236\u540d\u548c\u5bc6\u78bc (smtpUser/smtpPass) \u9032\u884c\u8a8d\u8b49\uff0c\u5fc5\u9808\u4f7f\u7528 OAuth 2.0 \u4f86\u6388\u6b0a\u7b2c\u4e09\u65b9\u61c9\u7528\u7a0b\u5e8f\u8a2a\u554f Gmail\u3002"}),"\n",(0,s.jsxs)(n.h2,{id:"whale-\u8a2d\u7f6e\u6b65\u9a5f",children:["\ud83d\udc33"," \u8a2d\u7f6e\u6b65\u9a5f"]}),"\n",(0,s.jsx)(n.h3,{id:"1-\u5b89\u88dd-go-\u8a9e\u8a00\u74b0\u5883",children:"1. \u5b89\u88dd Go \u8a9e\u8a00\u74b0\u5883"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4e0b\u8f09\u4e26\u89e3\u58d3 Go \u5230 /usr/local\nsudo tar -C /usr/local -xzf go1.x.x.linux-amd64.tar.gz\n\n# \u8a2d\u7f6e\u74b0\u5883\u8b8a\u91cf (\u6dfb\u52a0\u5230 ~/.bashrc \u6216 ~/.zshrc)\nexport GOPATH=$HOME/go\nexport PATH=$PATH:/usr/local/go/bin:$GOPATH/bin\n\n# \u61c9\u7528\u74b0\u5883\u8b8a\u91cf\nsource ~/.bashrc  # \u6216 source ~/.zshrc\n\n# \u9a57\u8b49\u5b89\u88dd\ngo version\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-\u5728-google-cloud-\u5275\u5efa-oauth-\u6191\u8b49",children:"2. \u5728 Google Cloud \u5275\u5efa OAuth \u6191\u8b49"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u8a2a\u554f Google Cloud Console"}),"\n",(0,s.jsx)(n.li,{children:"\u5275\u5efa\u65b0\u9805\u76ee"}),"\n",(0,s.jsx)(n.li,{children:"\u914d\u7f6e OAuth \u540c\u610f\u756b\u9762"}),"\n",(0,s.jsx)(n.li,{children:"\u6dfb\u52a0\u6e2c\u8a66\u7528\u6236 (\u60a8\u7684 Gmail \u5730\u5740)"}),"\n",(0,s.jsxs)(n.li,{children:["\u6dfb\u52a0 ",(0,s.jsx)(n.code,{children:"https://mail.google.com/"}),' \u4f5c\u70ba\u7bc4\u570d (\u5728 "API & Services" > "OAuth consent screen" > "Add or Remove Scopes")']}),"\n",(0,s.jsx)(n.li,{children:"\u5275\u5efa OAuth \u6191\u8b49\u4e26\u4e0b\u8f09 JSON \u6587\u4ef6"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-\u8a2d\u7f6e\u6191\u8b49\u6587\u4ef6",children:"3. \u8a2d\u7f6e\u6191\u8b49\u6587\u4ef6"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u5275\u5efa\u914d\u7f6e\u76ee\u9304\u4e26\u8a2d\u7f6e\u6b0a\u9650\nmkdir -p ${XDG_CONFIG_HOME:-${HOME}/.config}/sendgmail\nchmod 0700 ${XDG_CONFIG_HOME:-${HOME}/.config}/sendgmail\n\n# \u79fb\u52d5\u4e26\u91cd\u547d\u540d\u6191\u8b49\u6587\u4ef6\nmv \u4e0b\u8f09\u7684\u6191\u8b49.json ${XDG_CONFIG_HOME:-${HOME}/.config}/sendgmail/config.json\n\n# \u8a2d\u7f6e\u6587\u4ef6\u6b0a\u9650\nchmod 0600 ${XDG_CONFIG_HOME:-${HOME}/.config}/sendgmail/config.json\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-\u5b89\u88dd-sendgmail-\u5de5\u5177",children:"4. \u5b89\u88dd sendgmail \u5de5\u5177"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"go install github.com/google/gmail-oauth2-tools/go/sendgmail@latest\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-\u8a2d\u7f6e-sendgmail",children:"5. \u8a2d\u7f6e sendgmail"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4f7f\u7528\u5b8c\u6574\u8def\u5f91\n$GOPATH/bin/sendgmail -sender=\u60a8\u7684\u90f5\u7bb1@gmail.com -setup\n\n# \u6216\u8005\u5982\u679c $GOPATH/bin \u5df2\u5728 PATH \u4e2d\nsendgmail -sender=\u60a8\u7684\u90f5\u7bb1@gmail.com -setup\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-\u914d\u7f6e-git-send-email-\u4f7f\u7528-sendgmail",children:"6. \u914d\u7f6e git send-email \u4f7f\u7528 sendgmail"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.code,{children:".gitconfig"})," \u6587\u4ef6\u4e2d\u6dfb\u52a0\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[sendemail]\n  smtpserver = /home/\u60a8\u7684\u7528\u6236\u540d/go/bin/sendgmail\n  smtpserveroption = -sender=\u60a8\u7684\u90f5\u7bb1@gmail.com\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"whale-\u6ce8\u610f\u4e8b\u9805",children:["\ud83d\udc33"," \u6ce8\u610f\u4e8b\u9805"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u60a8\u9700\u8981\u5b9a\u671f\u5237\u65b0 OAuth \u4ee4\u724c\uff08\u901a\u5e38 sendgmail \u6703\u81ea\u52d5\u8655\u7406\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u5982\u679c\u9047\u5230\u9a57\u8b49\u554f\u984c\uff0c\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u904b\u884c sendgmail \u8a2d\u7f6e\u6b65\u9a5f"}),"\n",(0,s.jsx)(n.li,{children:"\u78ba\u4fdd\u5c07 OAuth \u6191\u8b49\u6587\u4ef6\u4fdd\u5b58\u5728\u5b89\u5168\u4f4d\u7f6e\uff0c\u4e26\u4f7f\u7528\u6b63\u78ba\u7684\u6b0a\u9650\u4fdd\u8b77"}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"whale-\u53c3\u8003\u8cc7\u6599",children:["\ud83d\udc33"," \u53c3\u8003\u8cc7\u6599"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/google/gmail-oauth2-tools/tree/master/go/sendgmail",children:"https://github.com/google/gmail-oauth2-tools/tree/master/go/sendgmail"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>o,x:()=>a});var i=l(6540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);